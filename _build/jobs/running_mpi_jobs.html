

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running MPI jobs &mdash; HPC Physics documentation 0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Monitoring your jobs" href="monitoring.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> HPC Physics documentation
          

          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../clusters/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news/news.html">News and notifications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../help/contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/staff.html">Support staff and Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/hpc-qa-sessions.html">Forum, Open Question &amp; Answer Sessions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Jobs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dos_and_donts.html">Dos and don’ts</a></li>
<li class="toctree-l1"><a class="reference internal" href="batch.html">Batch system</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Job script examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="slurm_parameter.html">SLURM Workload Manager</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="job_management.html">Managing jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring your jobs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Running MPI jobs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#intel-mpi">Intel MPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#openmpi">OpenMPI</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HPC Physics documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Running MPI jobs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/jobs/running_mpi_jobs.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="running-mpi-jobs">
<h1>Running MPI jobs<a class="headerlink" href="#running-mpi-jobs" title="Permalink to this headline">¶</a></h1>
<p>There are two available MPI implementations on Stallo:</p>
<ul class="simple">
<li><p>OpenMPI provided by the <code class="docutils literal notranslate"><span class="pre">foss</span></code> module, e.g. <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">foss/2016b</span></code></p></li>
<li><p>Intel MPI provided by the <code class="docutils literal notranslate"><span class="pre">intel</span></code> module, e.g. <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span> <span class="pre">intel/2016b</span></code></p></li>
</ul>
<p>There are several ways of launching an MPI application within a SLURM
allocation, e.g. <code class="docutils literal notranslate"><span class="pre">srun</span></code>, <code class="docutils literal notranslate"><span class="pre">mpirun</span></code>, <code class="docutils literal notranslate"><span class="pre">mpiexec</span></code> and <code class="docutils literal notranslate"><span class="pre">mpiexec.hydra</span></code>.
Unfortunately, the best way to launch your program depends on the MPI
implementation (and possibly your application), and choosing the wrong command
can severly affect the efficiency of your parallel run. Our recommendation is
the following:</p>
<section id="intel-mpi">
<h2>Intel MPI<a class="headerlink" href="#intel-mpi" title="Permalink to this headline">¶</a></h2>
<p>With Intel MPI, we have found that <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> can incorrectly distribute the
MPI ranks among the allocated nodes. We thus recommend using <code class="docutils literal notranslate"><span class="pre">srun</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ srun --mpi=pmi2 ./my_application
</pre></div>
</div>
</section>
<section id="openmpi">
<h2>OpenMPI<a class="headerlink" href="#openmpi" title="Permalink to this headline">¶</a></h2>
<p>With OpenMPI, <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> seems to be working correctly. Also, it seems that
<code class="docutils literal notranslate"><span class="pre">srun</span></code> fails to launch your application in parallel, so here we recommend
using <code class="docutils literal notranslate"><span class="pre">mpirun</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mpirun ./my_application
</pre></div>
</div>
<p>NOTE: If you’re running on the <code class="docutils literal notranslate"><span class="pre">multinode</span></code> partition you automatically
get the <code class="docutils literal notranslate"><span class="pre">--exclusive</span></code> flag, e.i. you get allocated (and charged for) <strong>full</strong>
nodes, even if you explicitly ask for less resources per node. This is not the
case for the <code class="docutils literal notranslate"><span class="pre">normal</span></code> partition.</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="monitoring.html" class="btn btn-neutral float-left" title="Monitoring your jobs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, HPC Physics group - NTNU

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>