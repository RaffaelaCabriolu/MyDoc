

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Batch system &mdash; HPC Physics documentation 0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Job script examples" href="examples.html" />
    <link rel="prev" title="Dos and don’ts" href="dos_and_donts.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> HPC Physics documentation
          

          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../clusters/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news/news.html">News and notifications</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../help/contact.html">Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/staff.html">Support staff and Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/hpc-qa-sessions.html">Forum, Open Question &amp; Answer Sessions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Jobs</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dos_and_donts.html">Dos and don’ts</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Batch system</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-job-script">Creating a job script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-pass-command-line-parameters-to-the-job-script">How to pass command-line parameters to the job script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#walltime">Walltime</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Job script examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="slurm_parameter.html">SLURM Workload Manager</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="job_management.html">Managing jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring your jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_mpi_jobs.html">Running MPI jobs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HPC Physics documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Batch system</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/jobs/batch.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="batch-system">
<span id="id1"></span><h1>Batch system<a class="headerlink" href="#batch-system" title="Permalink to this headline">¶</a></h1>
<p>The Stallo system is a resource that is shared between many of users and to
ensure fair use everyone must do their computations by submitting jobs through
a batch system that will execute the applications on the available resources.</p>
<p>The batch system on Stallo is <a class="reference external" href="https://slurm.schedmd.com/">SLURM</a> (Simple
Linux Utility for Resource Management.)</p>
<section id="creating-a-job-script">
<h2>Creating a job script<a class="headerlink" href="#creating-a-job-script" title="Permalink to this headline">¶</a></h2>
<p>To run a job on the system you need to create a job script. A job script is a
regular shell script (bash) with some directives specifying the number of CPUs,
memory, etc., that will be interpreted by the batch system upon submission.</p>
<p>You can find job script examples in <a class="reference internal" href="examples.html#job-script-examples"><span class="std std-ref">Job script examples</span></a>.</p>
<p>After you wrote your job script as shown in the examples, you can start it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sbatch</span> <span class="n">jobscript</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</section>
<section id="how-to-pass-command-line-parameters-to-the-job-script">
<h2>How to pass command-line parameters to the job script<a class="headerlink" href="#how-to-pass-command-line-parameters-to-the-job-script" title="Permalink to this headline">¶</a></h2>
<p>It is sometimes convenient if you do not have to edit the job script every time you want
to change the input file. Or perhaps you want to submit hundreds of jobs and
loop over a range of input files. For this it is handy to pass command-line
parameters to the job script.
For an overview of the different possible parameters, see <a class="reference internal" href="slurm_parameter.html#slurm-parameter"><span class="std std-ref">SLURM Parameter</span></a>.</p>
<p>In SLURM you can do this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sbatch myscript.sh myinput myoutput
</pre></div>
</div>
<p>And then you can pick the parameters up inside the job script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash

#SBATCH ...
#SBATCH ...
...

# argument 1 is myinput
# argument 2 is myoutput
mybinary.x &lt; ${1} &gt; ${2}
</pre></div>
</div>
<p>For recommended sets of parameters see also <a class="reference internal" href="slurm_parameter.html#slurm-recommendations"><span class="std std-ref">Settings for OpenMP and MPI jobs</span></a>.</p>
</section>
<section id="walltime">
<h2>Walltime<a class="headerlink" href="#walltime" title="Permalink to this headline">¶</a></h2>
<p>We recommend you to be as precise as you can when specifying the
parameters as they will inflict on how fast your jobs will start to run.
We generally have these rules for prioritizing jobs:</p>
<ol class="arabic simple">
<li><p>Large jobs, that is jobs with high CPUcounts, are prioritized.</p></li>
<li><p>Short jobs take precedence over long jobs.</p></li>
<li><p>Use fairshare. This means that users with many jobs running will get a
decreased priority compared to other users.</p></li>
</ol>
<p>To find out whether all users within one project share the same priority, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sshare -a -A nnNNNNk
</pre></div>
</div>
<p>For a given account (project) consider the column “RawShares”. If the RawShares
for the users is “parent”, they all share the same fairshare priority. If it is
a number, they have individual priorities.</p>
</section>
</section>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examples.html" class="btn btn-neutral float-right" title="Job script examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dos_and_donts.html" class="btn btn-neutral float-left" title="Dos and don’ts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, HPC Physics group - NTNU

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>